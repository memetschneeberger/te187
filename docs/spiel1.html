<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Englisch Lernspiel</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, #dbeafe, #f9fafb);
      color: #111827;
    }

    .app {
      max-width: 900px;
      margin: 1.5rem auto;
      padding: 1rem;
    }

    .card {
      background: white;
      border-radius: 1rem;
      padding: 1.25rem 1.5rem;
      box-shadow: 0 14px 40px rgba(15, 23, 42, 0.12);
      border: 1px solid #e5e7eb;
    }

    h1 {
      font-size: 1.6rem;
      margin: 0 0 0.5rem;
      text-align: center;
    }

    .subtitle {
      text-align: center;
      font-size: 0.95rem;
      color: #6b7280;
      margin-bottom: 1rem;
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .score,
    .level {
      font-size: 0.95rem;
      font-weight: 600;
    }

    .hearts {
      font-size: 1.1rem;
    }

    .progress-wrapper {
      flex: 1 1 100%;
      background: #f3f4f6;
      border-radius: 999px;
      height: 10px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e, #16a34a);
      transition: width 0.2s ease-out;
    }

    .question-box {
      margin-top: 0.5rem;
      margin-bottom: 1rem;
      text-align: center;
    }

    .question-type {
      display: inline-block;
      font-size: 0.7rem;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      background: #eef2ff;
      color: #4f46e5;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      margin-bottom: 0.4rem;
      font-weight: 600;
    }

    .question-text {
      font-size: 1.15rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
    }

    .question-sub {
      font-size: 0.9rem;
      color: #6b7280;
    }

    .options {
      display: grid;
      gap: 0.6rem;
      margin-top: 1rem;
    }

    @media (min-width: 640px) {
      .options {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .option-btn {
      border-radius: 0.9rem;
      border: 1px solid #e5e7eb;
      padding: 0.65rem 0.8rem;
      background: #f9fafb;
      cursor: pointer;
      font-size: 0.95rem;
      text-align: left;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
      transition: transform 0.05s ease-out, box-shadow 0.05s ease-out, background 0.15s;
    }

    .option-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.08);
    }

    .option-btn.correct {
      background: #dcfce7;
      border-color: #16a34a;
    }

    .option-btn.wrong {
      background: #fee2e2;
      border-color: #dc2626;
    }

    .option-label {
      font-weight: 600;
      font-size: 0.85rem;
      color: #6b7280;
    }

    .feedback {
      margin-top: 0.6rem;
      font-size: 0.95rem;
      min-height: 1.1rem;
    }

    .feedback.ok {
      color: #15803d;
    }

    .feedback.bad {
      color: #b91c1c;
    }

    .example-sentence {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #4b5563;
      font-style: italic;
    }

    .bottom-bar {
      margin-top: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    button {
      border-radius: 999px;
      border: none;
      padding: 0.45rem 0.9rem;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      background: #2563eb;
      color: white;
    }

    button.secondary {
      background: #e5e7eb;
      color: #111827;
    }

    button:disabled {
      opacity: 0.6;
      cursor: default;
    }

    .small {
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .game-over {
      text-align: center;
      margin-top: 0.5rem;
    }

    .game-over h2 {
      margin-bottom: 0.25rem;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.75rem;
      font-size: 0.8rem;
      color: #6b7280;
      justify-content: center;
    }

    .chip {
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      border: 1px dashed #e5e7eb;
      background: #f9fafb;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <h1>üéÆ Englisch Lernspiel</h1>
      <p class="subtitle">
        Sammle Punkte, halte deine Leben, und lerne dabei Englisch-Vokabeln.  
        W√§hle die richtige √úbersetzung oder Bedeutung.
      </p>

      <div class="status-bar">
        <div class="score">Punkte: <span id="score">0</span></div>
        <div class="level">Level: <span id="level">1</span></div>
        <div class="hearts" id="hearts">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        <div class="progress-wrapper">
          <div class="progress-bar" id="progress-bar"></div>
        </div>
      </div>

      <div id="game-area">
        <div class="question-box">
          <div class="question-type" id="question-type">Vokabel</div>
          <div class="question-text" id="question-text">
            Wie hei√üt dieses Wort auf Deutsch?
          </div>
          <div class="question-sub" id="question-sub">
            W√§hle die richtige Bedeutung.
          </div>
        </div>

        <div class="options" id="options">
          <!-- Optionen werden per JavaScript eingef√ºgt -->
        </div>

        <div class="feedback" id="feedback"></div>
        <div class="example-sentence" id="example"></div>

        <div class="bottom-bar">
          <div>
            <button id="btn-next" disabled>N√§chste Frage ‚ñ∂</button>
            <button id="btn-skip" class="secondary">√úberspringen üîÅ</button>
          </div>
          <span class="small">Spielerisches Lernen: je schneller & besser du bist, desto mehr Punkte pro Frage.</span>
        </div>
      </div>

      <div id="game-over" class="game-over" style="display:none;">
        <h2>Spiel vorbei üòÖ</h2>
        <p>Deine Punktzahl: <strong id="final-score">0</strong></p>
        <p>Dein Level: <strong id="final-level">1</strong></p>
        <button id="btn-restart">Nochmal spielen üîÅ</button>

        <div class="chip-row">
          <span class="chip">Tipp: Spiele jeden Tag 5‚Äì10 Runden</span>
          <span class="chip">Tipp: Sprich die W√∂rter laut nach</span>
          <span class="chip">Tipp: Notiere dir neue W√∂rter in einem Heft</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- Datensatz mit Vokabeln ---
    const vocabulary = [
      {en: "tired", de: "m√ºde", example: "I am tired after work."},
      {en: "hungry", de: "hungrig", example: "He is hungry and wants to eat."},
      {en: "office", de: "B√ºro", example: "She works in a big office."},
      {en: "coffee", de: "Kaffee", example: "I drink coffee every morning."},
      {en: "to learn", de: "lernen", example: "I want to learn English."},
      {en: "exam", de: "Pr√ºfung", example: "We have an important exam tomorrow."},
      {en: "book", de: "Buch", example: "This book is very interesting."},
      {en: "to study", de: "lernen / studieren", example: "She studies for her exam."},
      {en: "quickly", de: "schnell", example: "He runs very quickly."},
      {en: "slowly", de: "langsam", example: "Please speak slowly."},
      {en: "always", de: "immer", example: "I always brush my teeth."},
      {en: "sometimes", de: "manchmal", example: "Sometimes we eat pizza."},
      {en: "never", de: "nie", example: "He never drinks coffee."},
      {en: "friend", de: "Freund / Freundin", example: "My best friend lives in London."},
      {en: "to travel", de: "reisen", example: "We love to travel to new cities."},
      {en: "busy", de: "besch√§ftigt", example: "She is busy at work."},
      {en: "job", de: "Job / Arbeit", example: "He has a new job."},
      {en: "holiday", de: "Ferien / Urlaub", example: "We are on holiday in Spain."},
      {en: "early", de: "fr√ºh", example: "He gets up early every day."},
      {en: "late", de: "sp√§t", example: "I went to bed late."}
    ];

    // --- Grundzustand ---
    let score = 0;
    let level = 1;
    let lives = 3;
    let questionsAnsweredInLevel = 0;
    const questionsPerLevel = 6;

    let currentQuestion = null;
    let acceptingAnswers = true;

    const scoreEl = document.getElementById("score");
    const levelEl = document.getElementById("level");
    const heartsEl = document.getElementById("hearts");
    const progressBarEl = document.getElementById("progress-bar");
    const questionTypeEl = document.getElementById("question-type");
    const questionTextEl = document.getElementById("question-text");
    const questionSubEl = document.getElementById("question-sub");
    const optionsEl = document.getElementById("options");
    const feedbackEl = document.getElementById("feedback");
    const exampleEl = document.getElementById("example");
    const btnNext = document.getElementById("btn-next");
    const btnSkip = document.getElementById("btn-skip");
    const gameArea = document.getElementById("game-area");
    const gameOverBox = document.getElementById("game-over");
    const finalScoreEl = document.getElementById("final-score");
    const finalLevelEl = document.getElementById("final-level");
    const btnRestart = document.getElementById("btn-restart");

    function updateStatusBar() {
      scoreEl.textContent = score;
      levelEl.textContent = level;
      heartsEl.textContent = "‚ù§Ô∏è".repeat(lives) + "ü§ç".repeat(3 - lives);

      const progress = (questionsAnsweredInLevel / questionsPerLevel) * 100;
      progressBarEl.style.width = progress + "%";
    }

    function shuffle(array) {
      return array
        .map(value => ({value, sort: Math.random()}))
        .sort((a, b) => a.sort - b.sort)
        .map(({value}) => value);
    }

    function pickRandomDifferent(correctIndex, count) {
      const indices = [];
      const max = vocabulary.length;
      while (indices.length < count) {
        const idx = Math.floor(Math.random() * max);
        if (idx !== correctIndex && !indices.includes(idx)) {
          indices.push(idx);
        }
      }
      return indices;
    }

    function createQuestion() {
      // Zuf√§lligen Vokabel-Eintrag w√§hlen
      const correctIndex = Math.floor(Math.random() * vocabulary.length);
      const correctWord = vocabulary[correctIndex];

      // Entweder EN->DE oder DE->EN (f√ºr Abwechslung)
      const mode = Math.random() < 0.6 ? "en-to-de" : "de-to-en";

      let prompt, subText, correctAnswer, optionsRaw, typeLabel;

      if (mode === "en-to-de") {
        prompt = `Was bedeutet ‚Äû${correctWord.en}‚Äú auf Deutsch?`;
        subText = "W√§hle die richtige √úbersetzung.";
        correctAnswer = correctWord.de;
        typeLabel = "Vokabel (EN ‚Üí DE)";

        const wrongIndices = pickRandomDifferent(correctIndex, 3);
        optionsRaw = shuffle([
          correctWord.de,
          vocabulary[wrongIndices[0]].de,
          vocabulary[wrongIndices[1]].de,
          vocabulary[wrongIndices[2]].de
        ]);
      } else {
        prompt = `Welche englische Vokabel passt zu ‚Äû${correctWord.de}‚Äú?`;
        subText = "W√§hle das richtige englische Wort.";
        correctAnswer = correctWord.en;
        typeLabel = "Vokabel (DE ‚Üí EN)";

        const wrongIndices = pickRandomDifferent(correctIndex, 3);
        optionsRaw = shuffle([
          correctWord.en,
          vocabulary[wrongIndices[0]].en,
          vocabulary[wrongIndices[1]].en,
          vocabulary[wrongIndices[2]].en
        ]);
      }

      currentQuestion = {
        word: correctWord,
        mode,
        prompt,
        subText,
        correctAnswer,
        options: optionsRaw,
        typeLabel
      };
    }

    function renderQuestion() {
      if (!currentQuestion) return;

      questionTypeEl.textContent = currentQuestion.typeLabel;
      questionTextEl.textContent = currentQuestion.prompt;
      questionSubEl.textContent = currentQuestion.subText;
      feedbackEl.textContent = "";
      feedbackEl.className = "feedback";
      exampleEl.textContent = "";
      btnNext.disabled = true;
      acceptingAnswers = true;

      optionsEl.innerHTML = "";

      currentQuestion.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.dataset.option = opt;

        const spanText = document.createElement("span");
        spanText.textContent = opt;

        const spanLabel = document.createElement("span");
        spanLabel.className = "option-label";
        spanLabel.textContent = String.fromCharCode(65 + idx); // A,B,C,D

        btn.appendChild(spanText);
        btn.appendChild(spanLabel);

        btn.addEventListener("click", () => handleAnswer(btn, opt));
        optionsEl.appendChild(btn);
      });
    }

    function handleAnswer(button, chosen) {
      if (!acceptingAnswers) return;
      acceptingAnswers = false;

      const optionButtons = Array.from(document.querySelectorAll(".option-btn"));
      optionButtons.forEach(b => b.disabled = true);

      const isCorrect = chosen === currentQuestion.correctAnswer;

      if (isCorrect) {
        button.classList.add("correct");
        feedbackEl.textContent = "‚úÖ Richtig! Gut gemacht!";
        feedbackEl.className = "feedback ok";

        // Punkte: mit Level skalieren
        const pointsGained = 10 + (level - 1) * 3;
        score += pointsGained;
        questionsAnsweredInLevel++;

        exampleEl.textContent =
          "Beispielsatz: " + currentQuestion.word.example;

        // Level-Up?
        if (questionsAnsweredInLevel >= questionsPerLevel) {
          level++;
          questionsAnsweredInLevel = 0;
          feedbackEl.textContent += ` üéâ Level up! Du bist jetzt Level ${level}.`;
        }
      } else {
        button.classList.add("wrong");
        feedbackEl.textContent =
          "‚ùå Falsch. Richtig w√§re: " + currentQuestion.correctAnswer;
        feedbackEl.className = "feedback bad";

        lives--;
        exampleEl.textContent =
          "Merke dir: " +
          currentQuestion.word.en +
          " = " +
          currentQuestion.word.de +
          ". Beispiel: " +
          currentQuestion.word.example;
      }

      updateStatusBar();
      btnNext.disabled = false;

      if (lives <= 0) {
        // kleines Delay, damit der Nutzer die letzte Frage noch wahrnimmt
        setTimeout(() => endGame(), 600);
      }
    }

    function nextQuestion() {
      if (lives <= 0) return;
      createQuestion();
      renderQuestion();
    }

    function skipQuestion() {
      if (!acceptingAnswers) return; // Frage wurde schon beantwortet
      questionsAnsweredInLevel++;
      feedbackEl.textContent = "‚è≠ Frage √ºbersprungen. Versuch die n√§chste!";
      feedbackEl.className = "feedback";
      updateStatusBar();
      btnNext.disabled = false;
      acceptingAnswers = false;
      // Optionen deaktivieren
      const optionButtons = Array.from(document.querySelectorAll(".option-btn"));
      optionButtons.forEach(b => (b.disabled = true));

      if (questionsAnsweredInLevel >= questionsPerLevel) {
        level++;
        questionsAnsweredInLevel = 0;
        feedbackEl.textContent += ` üéâ Level up! Du bist jetzt Level ${level}.`;
      }
    }

    function endGame() {
      gameArea.style.display = "none";
      gameOverBox.style.display = "block";
      finalScoreEl.textContent = score;
      finalLevelEl.textContent = level;
    }

    function resetGame() {
      score = 0;
      level = 1;
      lives = 3;
      questionsAnsweredInLevel = 0;
      gameArea.style.display = "block";
      gameOverBox.style.display = "none";
      updateStatusBar();
      nextQuestion();
    }

    // --- Event-Listener ---
    btnNext.addEventListener("click", () => {
      nextQuestion();
    });

    btnSkip.addEventListener("click", () => {
      skipQuestion();
    });

    if (btnRestart) {
      btnRestart.addEventListener("click", () => {
        resetGame();
      });
    }

    // --- Start ---
    updateStatusBar();
    nextQuestion();
  </script>
</body>
</html>
